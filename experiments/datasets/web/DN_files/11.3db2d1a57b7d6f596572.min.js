webpackJsonp([11],{YFod:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function o(){this.attributes({forecastListSelector:".js-weather-forecast-list",forecastToday:".weather-menu__item--today",locationSelector:".js-locations",closeButtonSelector:".js-weather-close-button",expandedClass:"weather-menu--expanded"}),this.registerEvents=function(){var e=this;n.a.listen(r.a.weatherDataAvailable,function(){return e.$node.addClass("weather-menu--initialized")}),n.a.listen(r.a.weatherMenuExpand,function(){return e._toggle(!0)}),n.a.listen(r.a.weatherMenuCollapse,function(){return e._toggle(!1)}),this.select("locationSelector").on("change",function(a){e.locationId=t(a.target).val(),c.a.set("weatherLocationId",e.locationId),e.fetchForecastData(e.locationId)}),this.select("closeButtonSelector").on("click",function(){n.a.broadcast(r.a.weatherMenuCollapse)})},this._toggle=function(t){this.$node.toggleClass(this.attr.expandedClass,t)},this.emitDataToday=function(){var t=this.select("forecastToday");t&&t.length>0?n.a.broadcast(r.a.weatherDataAvailable,{temperature:t.data("temperature"),condition:""+t.data("condition")}):n.a.broadcast(r.a.weatherDataUnavailable)},this.fetchForecastData=function(t){var e=this;l.a.request("GET",h.urls.weatherForecastUrl+t,{},"html",!0).then(function(t){e.select("forecastListSelector").html(t),e.emitDataToday()})},this.after("initialize",function(){this.registerEvents();var t=this.select("locationSelector");this.locationId=c.a.get("weatherLocationId")||t.val(),this.locationId!==t.val()?(t.val(this.locationId),this.fetchForecastData(this.locationId)):this.emitDataToday()})}var i=a("qWBv"),n=a("cszA"),s=a("AQY+"),c=a("VhNf"),l=a("XSxQ"),r=a("SEOJ"),h=s.a.getMetaData(".js-metadata");e.default=Object(i.a)(o)}.call(e,a("0iPh"))}});