!function(b,c,a){c[b]=a()}("reqwest",this,function(){function b(a,b,e){return function(){if(a._aborted)return e(a.request);if(a._timedOut)return e(a.request,"Request is aborted: timeout");if(a.request&&4==a.request[t]){a.request.onreadystatechange=J;var f=K.exec(a.url);(f=f&&f[1]||window.location.protocol,L.test(f)?M.test(a.request.status):a.request.response)?b(a.request):e(a.request)}}}function c(a,b){var e=b.headers||{},f;e.Accept=e.Accept||r.accept[b.type]||r.accept["*"];var c="function"==typeof FormData&&
b.data instanceof FormData;b.crossOrigin||e[B]||(e[B]=r.requestedWith);e[C]||c||(e[C]=b.contentType||r.contentType);for(f in e)e.hasOwnProperty(f)&&"setRequestHeader"in a&&a.setRequestHeader(f,e[f])}function a(a){v=a}function e(a,b){return a+(/\?/.test(a)?"\x26":"?")+b}function f(b,f,c,d){var g=N++,p=b.jsonpCallback||"callback";b=b.jsonpCallbackName||m.getcallbackPrefix(g);var k=new RegExp("((^|\\?|\x26)"+p+")\x3d([^\x26]+)"),h=d.match(k),l=E.createElement("script"),n=0,r=-1!==navigator.userAgent.indexOf("MSIE 10.0");
return h?"?"===h[3]?d=d.replace(k,"$1\x3d"+b):b=h[3]:d=e(d,p+"\x3d"+b),q[b]=a,l.type="text/javascript",l.src=d,l.async=!0,"undefined"!=typeof l.onreadystatechange&&!r&&(l.htmlFor=l.id="_reqwest_"+g),l.onload=l.onreadystatechange=function(){if(l[t]&&"complete"!==l[t]&&"loaded"!==l[t]||n)return!1;l.onload=l.onreadystatechange=null;l.onclick&&l.onclick();f(v);v=void 0;w.removeChild(l);n=1},w.appendChild(l),{abort:function(){l.onload=l.onreadystatechange=null;c({},"Request is aborted: timeout",{});v=
void 0;w.removeChild(l);n=1}}}function d(a,d){var g=this.o,k=(g.method||"GET").toUpperCase(),u="string"==typeof g?g:g.url,p=!1!==g.processData&&g.data&&"string"!=typeof g.data?m.toQueryString(g.data):g.data||null,h,D=!1;("jsonp"==g.type||"GET"==k)&&p&&(u=e(u,p),p=null);"jsonp"==g.type?g=f(g,a,d,u):(h=g.xhr&&g.xhr(g)||O(g),h.open(k,u,!1===g.async?!1:!0),c(h,g),"undefined"!=typeof g.withCredentials&&"undefined"!=typeof h.withCredentials&&(h.withCredentials=!!g.withCredentials),g=(q[x]&&h instanceof
q[x]?(h.onload=a,h.onerror=d,h.onprogress=function(){},D=!0):h.onreadystatechange=b(this,a,d),g.before&&g.before(h),D?setTimeout(function(){h.send(p)},200):h.send(p),h));return g}function g(a,b){this.o=a;this.fn=b;h.apply(this,arguments)}function k(a){if(a.match("json"))return"json";if(a.match("javascript"))return"js";if(a.match("text"))return"html";if(a.match("xml"))return"xml"}function h(a,b){function e(b){a.timeout&&clearTimeout(c.timeout);for(c.timeout=null;0<c._completeHandlers.length;)c._completeHandlers.shift()(b)}
function f(a,b,A){a=c.request;c._responseArgs.resp=a;c._responseArgs.msg=b;c._responseArgs.t=A;for(c._erred=!0;0<c._errorHandlers.length;)c._errorHandlers.shift()(a,b,A);e(a)}this.url="string"==typeof a?a:a.url;this.timeout=null;this._fulfilled=!1;this._successHandler=function(){};this._fulfillmentHandlers=[];this._errorHandlers=[];this._completeHandlers=[];this._erred=!1;this._responseArgs={};var c=this;b=b||function(){};a.timeout&&(this.timeout=setTimeout(function(){c._timedOut=!0;c.request.abort()},
a.timeout));a.success&&(this._successHandler=function(){a.success.apply(a,arguments)});a.error&&this._errorHandlers.push(function(){a.error.apply(a,arguments)});a.complete&&this._completeHandlers.push(function(){a.complete.apply(a,arguments)});this.request=d.call(this,function(d){var g=a.type||d&&k(d.getResponseHeader("Content-Type"));d="jsonp"!==g?c.request:d;var h=F.dataFilter(d.responseText,g);try{d.responseText=h}catch(l){}if(h)switch(g){case "json":try{d=q.JSON?q.JSON.parse(h):eval("("+h+")")}catch(m){return f(d,
"Could not parse JSON in response",m)}break;case "js":d=eval(h);break;case "html":d=h;break;case "xml":d=d.responseXML&&d.responseXML.parseError&&d.responseXML.parseError.errorCode&&d.responseXML.parseError.reason?null:d.responseXML}c._responseArgs.resp=d;c._fulfilled=!0;b(d);for(c._successHandler(d);0<c._fulfillmentHandlers.length;)d=c._fulfillmentHandlers.shift()(d);e(d)},f)}function m(a,b){return new g(a,b)}function n(a){return a?a.replace(/\r?\n/g,"\r\n"):""}function G(a,b){var e=a.name,d=a.tagName.toLowerCase(),
f=function(a){a&&!a.disabled&&b(e,n(a.attributes.value&&a.attributes.value.specified?a.value:a.text))},c,g,h;if(!a.disabled&&e)switch(d){case "input":/reset|button|image|file/i.test(a.type)||(c=/checkbox/i.test(a.type),g=/radio/i.test(a.type),h=a.value,(!c&&!g||a.checked)&&b(e,n(c&&""===h?"on":h)));break;case "textarea":b(e,n(a.value));break;case "select":if("select-one"===a.type.toLowerCase())f(0<=a.selectedIndex?a.options[a.selectedIndex]:null);else for(d=0;a.length&&d<a.length;d++)a.options[d].selected&&
f(a.options[d])}}function H(){var a,b;for(b=0;b<arguments.length;b++){a=arguments[b];/input|select|textarea/i.test(a.tagName)&&G(a,this);for(var e=["input","select","textarea"],d=void 0,f=void 0,c=void 0,d=0;d<e.length;d++)for(c=a[I](e[d]),f=0;f<c.length;f++)G(c[f],this)}}function P(){return m.toQueryString(m.serializeArray.apply(null,arguments))}function Q(){var a={};return H.apply(function(b,e){b in a?(a[b]&&!y(a[b])&&(a[b]=[a[b]]),a[b].push(e)):a[b]=e},arguments),a}function z(a,b,e,d){var f,c,
g=/\[\]$/;if(y(b))for(f=0;b&&f<b.length;f++)c=b[f],e||g.test(a)?d(a,c):z(a+"["+("object"==typeof c?f:"")+"]",c,e,d);else if(b&&"[object Object]"===b.toString())for(f in b)z(a+"["+f+"]",b[f],e,d);else d(a,b)}var q=window,E=document,L=/^http/,K=/(^\w+):\/\//,M=/^(20\d|1223)$/,I="getElementsByTagName",t="readyState",C="Content-Type",B="X-Requested-With",w=E[I]("head")[0],N=0,R="reqwest_"+ +new Date,v,x="XDomainRequest",J=function(){},y="function"==typeof Array.isArray?Array.isArray:function(a){return a instanceof
Array},r={contentType:"application/x-www-form-urlencoded",requestedWith:"XMLHttpRequest",accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},O=function(a){if(!0===a.crossOrigin){if((a=q.XMLHttpRequest?new XMLHttpRequest:null)&&"withCredentials"in a)return a;if(q[x])return new XDomainRequest;throw Error("Browser does not support cross-origin requests");
}return q.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},F={dataFilter:function(a){return a}};return g.prototype={abort:function(){this._aborted=!0;this.request.abort()},retry:function(){h.call(this,this.o,this.fn)},then:function(a,b){return a=a||function(){},b=b||function(){},this._fulfilled?this._responseArgs.resp=a(this._responseArgs.resp):this._erred?b(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(a),this._errorHandlers.push(b)),
this},always:function(a){return this._fulfilled||this._erred?a(this._responseArgs.resp):this._completeHandlers.push(a),this},fail:function(a){return this._erred?a(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(a),this},"catch":function(a){return this.fail(a)}},m.serializeArray=function(){var a=[];return H.apply(function(b,e){a.push({name:b,value:e})},arguments),a},m.serialize=function(){if(0===arguments.length)return"";var a,b,e=Array.prototype.slice.call(arguments,
0);return a=e.pop(),a&&a.nodeType&&e.push(a)&&(a=null),a&&(a=a.type),"map"==a?b=Q:"array"==a?b=m.serializeArray:b=P,b.apply(null,e)},m.toQueryString=function(a,b){var e,d=b||!1,f=[],c=encodeURIComponent,g=function(a,b){b="function"==typeof b?b():null==b?"":b;f[f.length]=c(a)+"\x3d"+c(b)};if(y(a))for(e=0;a&&e<a.length;e++)g(a[e].name,a[e].value);else for(e in a)a.hasOwnProperty(e)&&z(e,a[e],d,g);return f.join("\x26").replace(/%20/g,"+")},m.getcallbackPrefix=function(){return R},m.compat=function(a,
b){return a&&(a.type&&(a.method=a.type)&&delete a.type,a.dataType&&(a.type=a.dataType),a.jsonpCallback&&(a.jsonpCallbackName=a.jsonpCallback)&&delete a.jsonpCallback,a.jsonp&&(a.jsonpCallback=a.jsonp)),new g(a,b)},m.ajaxSetup=function(a){a=a||{};for(var b in a)F[b]=a[b]},m});"use strict";
(function(){if("undefined"==typeof window.ServicePlusJs){Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){for(var f=b||0,d=this.length;f<d;f++)if(this[f]===a)return f;return-1});try{if("object"===typeof localStorage)try{localStorage.setItem("localStorage",1),localStorage.removeItem("localStorage")}catch(b){Storage.prototype._setItem=Storage.prototype.setItem,Storage.prototype.setItem=function(){}}}catch(c){}Array.prototype.filter||(Array.prototype.filter=function(a,b){if(null==this)throw new TypeError;
var f=Object(this),d=f.length>>>0;if("function"!=typeof a)throw new TypeError;for(var c=[],k=0;k<d;k++)if(k in f){var h=f[k];a.call(b,h,k,f)&&c.push(h)}return c});String.prototype.toCamel=function(){return this.replace(/(\-[a-z])/g,function(a){return a.toUpperCase().replace("-","")})};window.$Class=function(a,b){var f,d,c=function(){this.initialize.apply(this,arguments)},k=function(a,b){for(var e in b)a[e]=b[e];return a};"function"===typeof a?(f=a,d=b):d=a;void 0!==f&&(k(c.prototype,f.prototype),
c.prototype.$parent=f.prototype);k(c.prototype,d);c.prototype.constructor=c;c.prototype.initialize||(c.prototype.initialize=function(){});return c};window.ServicePlus={};window.ServicePlusJs=$Class({initialized:!1,initialize:function(){this.initialized=!0},pushNotification:function(){var a="Inventory",b="OTHER",c="",d="";3<arguments.length?(a=arguments[0],b=arguments[1],c=arguments[2],d=arguments[3]):2<arguments.length?(b=arguments[0],c=arguments[1],d=arguments[2]):1<arguments.length?(b=arguments[0],
c=arguments[1]):0<arguments.length&&(b=arguments[0]);"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent",a,b,c,d]);"undefined"!=typeof ga&&ga("send","event",a,b,c,d);var g=window.dataLayer||window.dataLayer||[],k={event:"trackEvent"};k.gtmCategory=a;k.gtmAction=this.forceHitParam?"P\u00e5tvingad "+b:b;k.gtmLabel=c;k.gtmValue=d;g.push(k);window.dataLayer=window.dataLayer=g;this.logIfVerbose("dataLayer:"+JSON.stringify(k))},execWhen:function(){if(2>arguments.length)throw new TypeError("wrong number of parameter");
var a=arguments[0],b=arguments[1],c=2<arguments.length?arguments[2]:"",d=2;"function"!=typeof c&&(d=1,c=function(a){return a});var g=this;if("boolean"===typeof a&&a)a=c([].filter.call(arguments,function(a,b){return b>d})),b.apply(g,a);else{if("function"!=typeof a)throw new TypeError("the first parameter must be function or boolean. execWhen(condition,fn,transformArgs,...args) ");if(a())a=c([].filter.call(arguments,function(a,b){return b>d})),b.apply(g,a);else{var k=arguments;setTimeout(function(){g.execWhen.apply(g,
k)},100)}}},trace:function(){var a=1<arguments.length?arguments[1]:arguments[0];console.log((1<arguments.length?arguments[0]:location.host)+" - "+function(){var a=new Date,b=a.getHours()+"",c=a.getMinutes()+"",g=a.getSeconds()+"",a=a.getMilliseconds()+"";1==b.length&&(b="0"+b);1==c.length&&(c="0"+c);1==g.length&&(g="0"+g);a="000".substring(a.length)+a;return b+":"+c+":"+g+"."+a}()+":"+a)},setCookie:function(a,b,c){var d=new Date;d.setTime(d.getTime()+c);c="expires\x3d"+d.toUTCString();document.cookie=
a+"\x3d"+b+"; "+c},eraseCookie:function(a){this.setCookie(a,"",-1)},readCookie:function(a){a+="\x3d";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1);if(-1!=d.indexOf(a))return d.substring(a.length,d.length)}return""},logIfVerbose:function(a){var b="[verbose]:";this.hasOwnProperty("$script")&&(b="["+this.$script.id+"("+this.initTime+")]");""==this.readCookie("verbose")&&"#debug"!=window.location.hash||this.trace(b,a)},extractAttributes:function(a,
b){for(var c=[],d=[].filter.call(a.attributes,function(a){return/^data-/.test(a.name)}),g=0;g<d.length;g++)0<d[g].name.indexOf(b)&&c.push({key:d[g].name.slice(5).toCamel(),value:d[g].value});return c},queryParams:function(a){if(""==a)return{};for(var b={},c=0;c<a.length;++c){var d=a[c].split("\x3d",2);b[d[0]]=1==d.length?"":decodeURIComponent(d[1].replace(/\+/g," "))}return b},wget:function(){reqwest.apply(this,arguments)},triggerEvent:function(a,b){var c=this,d=a;typeof this.hasOwnProperty("eventMapping")&&
this.hasOwnProperty("$script")&&this.eventMapping.hasOwnProperty(this.$script.id)&&(d=this.eventMapping[this.$script.id][a],"undefined"==typeof d&&(d=a));this.execWhen(function(){return"undefined"!=typeof $},function(g){c.logIfVerbose(d+" is fired");$._data(document,"events")||$(document).data("events");0<=["showPremiumContent","hidePremiumContent"].indexOf(a)&&$("body").attr("data-paywall-event",a);window.setTimeout(function(){$(document).trigger(d,b)},2E3)})},addArticleParam:function(){if(4>arguments.length)throw new TypeError("wrong number of parameter");
for(var a=arguments[0],b=arguments[1],c=[].filter.call(arguments,function(a,b){return 1<b}),d=c[0],g=c[1],k="",h=0;h<c.length-1;h++)k="\x26"+c[h]+"\x3d"+c[h+1];h=this.queryParams;c=document.createElement("a");c.href=a;for(var a=h(c.search.substr(1).split("\x26")),m=null,h=null,h=0;h<b.length;h++)if("undefined"!=typeof a[b[h]]){h=b[h];m=a[h];b=m+(0>m.indexOf("?")?"?":"\x26")+d+"\x3d"+g+k;d="?";a[h]=encodeURIComponent(b);for(var n in a)d+=n+"\x3d"+a[n]+"\x26";c.search=d.substring(0,d.length-1);break}return c.href},
getArticleId:function(){for(var a="",b=document.getElementsByTagName("meta"),c=0;c<b.length;c++)if("navId"==b[c].getAttribute("name")||"navId"==b[c].getAttribute("property")){a=b[c].getAttribute("content");break}return a},getParameterByName:function(a,b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=(new RegExp("[\\?\x26]"+b+"\x3d([^\x26#]*)")).exec(a);return null===c?"":c[1].replace(/\+/g," ")},appendPerchyToTags:function(a,b){if("undefined"===typeof b||""===b||null===b)return a;if("undefined"===
typeof a||""===a||null===a)return JSON.stringify({perchy:b});try{var c=decodeURIComponent(a),d=JSON.parse(c);d.perchy=b;return JSON.stringify(d)}catch(g){return""}},getPerchyValue:function(){for(var a="",a=document.getElementsByTagName("meta"),b=0;b<a.length;b++)if("perchy"===a[b].getAttribute("property"))return a=a[b].getAttribute("content")},toString:function(){return"Serviceplus Javascript Core version 0.1"}});window.ServicePlus.$Class=ServicePlusJs}})();
(function(){"undefined"==typeof window.ServicePlus.Paywall&&(window.ServicePlus.Paywall=$Class(ServicePlusJs,{eventMapping:{serviceplusPaywall3:{showPremiumContent:"showPremiumContent3",hidePremiumContent:"hidePremiumContent3"}},AJAX_TIMEOUT:3E4,GATEWAY_TIMEOUT:3E3,TIMEOUT:5E3,INTERVAL:100,VISIBLE_HEIGHT:0,BLUR_HEIGHT:50,FORCE_SCRIPT_PARAM:"forceScript",PURCHASE_COMPLETE:"purchase-complete",initialized:!1,appId:"di.se",data:{},ipRestricted:!1,showOverlay:!1,ignoreMask:!1,forceHitOrder:!1,initialize:function(){this.initTime=
""+(new Date).getTime();1==arguments.length&&"string"===typeof arguments[0]?(this.$script=document.getElementById(arguments[0]),this.$script.id=arguments[0]):1==arguments.length&&arguments[0]instanceof Node?(this.$script=arguments[0],this.$script.setAttribute("data-initialized",""+this.initTime)):"undefined"!=typeof document.currentScript&&(this.$script=document.currentScript);this.logIfVerbose("initialize: "+this.$script.id);this.parseScript();this.logIfVerbose(" loginURL \x3d "+this.data.loginURL);
if(localStorage)try{var b=localStorage.getItem("clicked_back_button"),b="string"==typeof b?parseInt(b):b;localStorage.removeItem("clicked_back_button");var c=(new Date).getTime()-b;console.log("clicked_back_button \x3d"+c);if(1E4>c){console.log("click back button");return}}catch(a){}var e=this;this.checkURL(function(){e.checkCookies(function(){e.check()})})},parseScript:function(){var b=this.$script;this.baseURL="//auth.dn.se/";this.data.paywallContainerId=this.paywallContainerId=b.id+"paywall-container";
this.data.appId=this.appId=b.getAttribute("data-appid")||this.appId;this.data.resourceId=this.resourceId=b.getAttribute("data-resourceid")||this.appId;this.data.clientId=this.clientId=b.getAttribute("data-clientid")||this.clientId;this.data.idToken=this.idToken=b.getAttribute("data-idtoken")||this.idToken;this.data.loginURL=this.loginURL=b.getAttribute("data-loginurl")||this.baseURL+"login?appId\x3ddi.se\x26lc\x3dsv\x26callback\x3d"+encodeURIComponent(window.location.href);this.data.buyURLs=this.buyURLs=
this.extractAttributes(b,"buyurl")||[{key:"fallbackBuyurl",value:"http://campaigner.dn.se/dnse?ptag\x3dDNPREMIUM\x26section\x3dKonsertrecensioner\x26action\x3dorder\x26callback\x3d"+encodeURIComponent(window.location.href)}];this.data.article=this.article=b.getAttribute("data-wrapper")||".premium-article";this.data.selector=this.selector=b.getAttribute("data-holder")||".premium-holder";this.data.forceHitParam=this.forceHitParam="true"==(b.getAttribute("data-forcehit")?b.getAttribute("data-forcehit").toLowerCase():
!1);this.data.variantType=this.variantType=b.getAttribute("data-paywall")||b.getAttribute("data-variant-type")||"";this.data.tags=this.tags=b.getAttribute("data-tags")||"";"ADBLOCKER"===this.variantType&&(this.showOverlay=!0);this.data.verbose=this.verbose=""!=this.readCookie("verbose");this.data.alSelector=this.alSelector=".article-wrapper";this.data.articleId=this.articleId=b.getAttribute("data-articleid")||this.getArticleId();this.data.articleTitle=this.articleTitle=b.getAttribute("data-article-title");
this.data.customCss=this.customCss="true"==(b.getAttribute("data-custom-css")?b.getAttribute("data-custom-css").toLowerCase():!1);this.data.tracker=this.tracker=void 0;this.data.variant=this.variant=void 0;this.BLUR_HEIGHT=b.getAttribute("data-blurheight")||this.BLUR_HEIGHT;this.ignoreMask=0<this.loginURL.indexOf("redirectToUrl")&&"ADBLOCKER"!=this.variantType;this.data.loginURL=this.loginURL=this.addArticleParam(this.loginURL,["callback","returnUrl","redirectToUrl"],this.FORCE_SCRIPT_PARAM,"1","variantType",
this.variantType);this.articleId||"ADBLOCKER"!=this.variantType||(this.data.articleId=this.articleId=""+(new Date).getTime());if("undefined"==typeof this.appId||"undefined"==typeof this.resourceId||"undefined"==typeof this.loginURL||"undefined"==typeof this.articleId)this.logIfVerbose("Missing required parameters");else{this.logIfVerbose("Verbose mode is enabled");this.logIfVerbose("User agent: "+window.navigator.userAgent);this.logIfVerbose("Paywall configurations: { appId:"+this.appId+", resourceId:"+
this.resourceId+", loginURL:"+this.loginURL+", buyURLs:"+JSON.stringify(this.buyURLs)+" }");this.data.referrer=this.referrer=document.referrer;-1<navigator.userAgent.indexOf("FBAN")||-1<navigator.userAgent.indexOf("FB_IAB")?this.data.referrer=this.referrer="http://m.facebook.com":-1<navigator.userAgent.indexOf("Twitter")&&(this.data.referrer=this.referrer="http://t.co");b=this.getPerchyValue();this.tags=this.appendPerchyToTags(this.tags,b);try{localStorage&&(this.forceHitOrder=localStorage.getItem("forceHitOrder"+
this.articleId)||!1)}catch(c){}this.forceHitOrder="string"==typeof this.forceHitOrder?JSON.parse(this.forceHitOrder):this.forceHitOrder;try{localStorage.removeItem("forceHitOrder"+this.articleId)}catch(a){}}},getSecureBaseUrl:function(){return/local/.test("https://auth.dn.se/")?this.baseURL:"https:"+this.baseURL},clearOverlay:function(){$("html, body").css("height","auto").css("overflow","visible");$("#pwOverlay").remove()},createOverlay:function(){var b=this,c="600px",a="rgb(0,0,0)",e="rgba(0,0,0, 0.9)",
f="",d="ADBLOCKER"==b.variantType;d&&(f='\x3ca id\x3d"pwOverlayClose" href\x3d"javascript:void" style\x3d"text-decoration:none;font-family:BentonSansDI-Bold, sans-serif; font-size: 13px;color: #fff;z-index: 888899;cursor: pointer;position: absolute;right: 0;top: 30px; display: none;" \x3eNej tack, inte just nu \x3cspan style\x3d"font-size:18px"\x3e\x26#10799;\x3c/span\x3e\x3c/a\x3e',c="915px",e=a="rgba(0, 0, 0, 0.75)",$(this.selector).first().remove());c='\x3cdiv id\x3d"pwOverlay"\x3e\x3cdiv class\x3d"pwOverlayContent" style\x3d"max-width:'+
c+';margin:0 auto;background-color:rgba(0,0,0, 0.0)"\x3e'+f+"\x3c/div\x3e\x3c/div\x3e";$("body").append(c);b.data.article=b.article=b.data.selector=b.selector=".pwOverlayContent";$("#pwOverlay").css({height:"100%",width:"100%",position:"fixed","z-index":"888889",left:"0",top:"0","background-color":a,"background-color":e,"overflow-x":"hidden",transition:"0.5s"});if(d)$("#pwOverlayClose").on("click",function(){b.clearOverlay.apply(b)})},check:function(){var b=this;this.logIfVerbose("Checking Paywall at "+
(new Date).getTime());this.logIfVerbose("Sent parameters: { appId:"+this.appId+", resourceId:"+this.resourceId+", articleId:"+(this.forceHitParam?"":this.articleId)+"}");var c={appId:encodeURIComponent(this.appId),resourceId:encodeURIComponent(this.resourceId),articleId:encodeURIComponent(this.articleId),forcehit:this.forceHitParam,referrer:this.referrer,verbose:this.verbose,tags:this.tags};b.logIfVerbose("request params:"+JSON.stringify(c));b.variantType&&(c.variantType=this.variantType);void 0!==
b.clientId&&void 0!==b.idToken&&(c.clientId=this.clientId,c.id_token=this.idToken);this.wget({url:this.baseURL+"v2/check-paywall",type:"jsonp",method:"get",jsonpCallback:"jsonpCallback",crossOrigin:!0,withCredentials:!0,data:c,error:function(a){b.logIfVerbose("Checking Paywall failed! Server is unavailable.");b.displayArticle();b.pushNotification("OTHER","Checking Paywall failed")},success:function(a){b.logIfVerbose("Checking Paywall completed at "+(new Date).getTime());b.logIfVerbose(JSON.stringify(a));
!b.forceHitParam||"undefined"!=typeof a.limit&&"-1"!=a.limit||(a.limit="9007199254740991");if("undefined"!=typeof a.desc&&-1<a.desc.indexOf("ip_restrict")){b.ipRestricted=!0;b.ignoreMask=b.ignoreMask&&(!a.appearance||"INLINE"==a.appearance);a.appearance&&"OVERLAY"==a.appearance&&b.triggerEvent("showPremiumContent");if(document.getElementsByTagName("body")[0].hasAttribute("ip_restrict")){b.logIfVerbose("Show overlay mask");return}b.logIfVerbose("Show overlay mask");document.getElementsByTagName("body")[0].setAttribute("ip_restrict",
"yes");b.showOverlay=!0}if(a.result)"undefined"!=typeof a.tracker&&(d="Clicked locked articles"+("undefined"==typeof a.referenced?"":" - Reference")+("undefined"==typeof a.variant?"":" - "+a.variant),"undefined"==typeof a.variant?b.execWhen(function(){return"undefined"!=typeof b.variant},b.pushNotification,function(a){a[1]=a[1]+" - "+this.variant;return a},"Bes\u00f6kt l\u00e5st artikel",d,a.tracker):b.pushNotification("Bes\u00f6kt l\u00e5st artikel",d,a.tracker),b.variant=a.variant,b.tracker=a.tracker);
else{b.forceHitOrder=b.forceHitParam&&!isNaN(parseInt(a.limit))&&!isNaN(parseInt(a.visitedArticles))&&-1<=parseInt(a.visitedArticles)&&parseInt(a.visitedArticles)<parseInt(a.limit)&&-1!=parseInt(a.limit);try{localStorage&&localStorage.setItem("forceHitOrder"+b.articleId,b.forceHitOrder)}catch(c){}if("undefined"==typeof a.limit)"undefined"==typeof a.variant?b.execWhen(function(){return"undefined"!=typeof b.variant},b.pushNotification,function(a){a[1]=a[1]+" - "+b.variant;return a},"OTHER","Checking Paywall failed due to broken cookies",
a.tracker):b.pushNotification("OTHER","Checking Paywall failed due to broken cookies",a.tracker);else{var f="ADBLOCKER"==b.variantType?" (adblock)":"",d=("ADBLOCKER"==b.variantType?"Adblock Paywall":"Hit the Paywall")+("undefined"==typeof a.referenced?"":" - Reference")+("undefined"==typeof a.variant?"":" - "+a.variant);"undefined"==typeof a.variant?b.execWhen(function(){return"undefined"!=typeof b.variant},b.pushNotification,function(a){a[1]=a[1]+" - "+b.variant;return a},"G\u00e5tt in i betalv\u00e4ggen"+
f,d,a.tracker):b.pushNotification("G\u00e5tt in i betalv\u00e4ggen"+f,d,a.tracker);b.variant=a.variant;b.tracker=a.tracker;$(b.$script).attr("data-tracker",""+a.tracker)}b.showOverlay="ADBLOCKER"==b.variantType||a.appearance&&"OVERLAY"==a.appearance;!b.showOverlay||"undefined"!=typeof a.referenced&&0!=a.referenced||b.createOverlay.apply(b)}b.callback(a)}})},callback:function(b){this.triggerEvent("splusCheckPaywall",b.result);b.result||"undefined"==typeof b.limit||"undefined"!=typeof b.referenced?
(this.triggerEvent("initAd"),this.showOverlay||this.triggerEvent("showPremiumContent"),this.displayArticle()):(this.showOverlay||this.triggerEvent("hidePremiumContent"),this.displayDefaultPopup(b))},displayArticle:function(){var b=this;this.execWhen(function(){if(b.ignoreMask)return!0;var c=document.querySelectorAll(b.article),a=document.querySelectorAll(b.selector);return 0<c.length&&0<a.length},function(){var c=document.querySelectorAll(b.article),a=document.querySelectorAll(b.selector);[].filter.call(c,
function(a){a.style.visibility="visible";a.style.display="block"});[].filter.call(a,function(a){a.style.visibility="visible";a.style.display="block"})})},displayDefaultPopup:function(b){var c=this;this.execWhen(function(){if(c.ignoreMask)return"undefined"!=typeof $;var a=document.querySelectorAll(c.article),b=document.querySelectorAll(c.selector);return 0<a.length&&0<b.length&&"undefined"!=typeof $},function(){c.buildPopup(b.limit,b.period)})},buildPopup:function(b,c){this.logIfVerbose("Loading Paywall popup: {limit: "+
b+", period: "+c+" }... ");var a=this.getSecureBaseUrl()+"v2/paywallPopup.html?appId\x3d"+this.appId+"\x26loginURL\x3d"+encodeURIComponent(this.loginURL)+"\x26verbose\x3d"+this.verbose+"\x26articleId\x3d"+this.articleId+"\x26resourceId\x3d"+this.resourceId;this.articleTitle&&(a+="\x26articleTitle\x3d"+encodeURIComponent(this.articleTitle));this.variantType&&(a+="\x26variantType\x3d"+this.variantType+"\x26isEmbedded\x3dtrue");this.forceHitParam&&(a+="\x26forcehit\x3dtrue");for(var e=0;e<this.buyURLs.length;e++)a+=
"\x26"+this.buyURLs[e].key+"\x3d"+encodeURIComponent(this.buyURLs[e].value);a=a+("\x26limit\x3d"+b+"\x26period\x3d"+c)+("\x26tags\x3d"+encodeURIComponent(this.tags));this.fetchRemotePage(a,this.popupCallback)},fetchRemotePage:function(b,c,a,e){var f=this,d=$("#"+this.paywallContainerId);f.robot&&(d=$("#"+this.paywallContainerId).find(".robot-paywall").first());d.length&&d.html('\x3cdiv class\x3d"loading" style\x3d"text-align: center; padding-top: 20% "\x3e\x3cimg src\x3d"'+decodeURIComponent(f.getSecureBaseUrl())+
'public/images/facebox/loading.gif" / \x3e \x3c/div\x3e');$.ajax({type:"GET",async:!0,dataType:"jsonp",jsonp:"jsonpCallback",timeout:e||this.AJAX_TIMEOUT,xhrFields:{withCredentials:!0},url:b,success:function(a){f.logIfVerbose("Loading completed "+b);"undefined"!=typeof c&&null!=c&&c.call(f,a)},error:function(c){f.logIfVerbose("Loading failed! Server is unavailable:"+b+"."+JSON.stringify(c));if(0<$(".paywall-content").length||f.showOverlay)f.clearPaywallPopup(),f.displayArticle();"undefined"!=typeof a&&
a(c)}})},checkCookies:function(b){this.checkForcedHitCookie()&&this.checkAllowedCookie()&&b()},checkURL:function(b){var c=this;return this.performHashCheck(function(a){c.execWhen(function(){if(c.ignoreMask||c.showOverlay)return!0;var a=document.querySelectorAll(c.article),b=document.querySelectorAll(c.selector);return 0<a.length&&0<b.length},function(){c.ignoreMask||c.initLoggedInPopup();c.confirmationPopupCallback(a)})},b)},initLoggedInPopup:function(){var b=this;b.showOverlay&&b.createOverlay.apply(b);
var c=$(this.selector).first();b.customCss||c.addClass("paywall-content").data("float",c.css("float")).css({height:this.VISIBLE_HEIGHT+this.BLUR_HEIGHT-1+"px",overflow:"hidden","float":"none"});var a=c.width();b.customCss?c.after('\x3cdiv id\x3d"'+this.paywallContainerId+'" class\x3d"custom-pw-container" \x3e'):c.after('\x3cdiv id\x3d"'+this.paywallContainerId+'" style\x3d"width: '+a+'px; margin:0 auto; min-height: 350px; background: white; "\x3e');c.after(b.createPaywallMask(a));$(this.selector).show();
$(this.selector).find(this.article).show();"fokus"===this.variantType&&c.css({display:"none"});b.customCss||$(window).resize(function(){$("#"+b.paywallContainerId).css("width",c.width());$(".paywall-mask").css("width",c.width())})},createPaywallMask:function(b){var c="transparent";this.showOverlay||(c="url("+this.baseURL+"public/images/paywall/"+this.appId+"-"+(this.variantType?this.variantType:"")+"-blur.png?appId\x3d"+this.appId+") 0% 100% no-repeat");var a=$("\x3cdiv\x3e\x3c/div\x3e",{"class":"paywall-mask"});
this.customCss||a.css({height:this.BLUR_HEIGHT+"px",width:b?b+"px":"100%","background-size":"cover",background:c,position:"absolute","margin-top":-(this.BLUR_HEIGHT-1)+"px"});switch(this.variantType){case "DIBETA":a.css({height:2*this.BLUR_HEIGHT+"px",marginTop:-(2*this.BLUR_HEIGHT-1)+"px"})}return a},checkForcedHitCookie:function(){if(""==this.readCookie("forceHitPaywall"))return!0;this.logIfVerbose("forceHitPaywall is activated");this.pushNotification("Inventory","Force G\u00e5tt in i betalv\u00e4ggen",
"Odefinierat fl\u00f6de");this.wget({url:this.baseURL+"v2/check-paywall",type:"jsonp",method:"get",jsonpCallback:"jsonpCallback",crossOrigin:!0,withCredentials:!0,data:{appId:encodeURIComponent(this.appId),resourceId:encodeURIComponent(this.resourceId),articleId:encodeURIComponent(this.articleId),referrer:document.referrer,variantType:this.variantType,tags:this.tags}});this.callback({result:!1,limit:20,period:30});return!1},checkAllowedCookie:function(){var b=navigator.cookieEnabled;"undefined"!=
typeof navigator.cookieEnabled||b||(document.cookie="testcookie",b=-1!=document.cookie.indexOf("testcookie"));return b?!0:($(selector).first().html('\x3cdiv id\x3d"'+this.paywallContainerId+'" style\x3d"width: 100%;margin:0 auto; min-height: 350px; background: white; "\x3e\x3cdiv style\x3d"text-align: center; padding-top: 20% "\x3e\x3cp style\x3d"font-size: 16px"\x3eAktivera cookies f\u00c3\u00b6r den h\u00c3\u00a4r webbplatsen.\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e').css("position","relative"),$(selector).show(),
!1)},clearPaywallPopup:function(){$(".paywall-content").css({height:"auto",overflow:""});"undefined"!=typeof $(".paywall-content").data("float")&&$(".paywall-content").css("float",$(".paywall-content").data("float"));$(".paywall-mask").remove();$("#"+this.paywallContainerId).remove();this.showOverlay&&this.clearOverlay.apply(this);this.triggerEvent("showPremiumContent")},initPopup:function(){var b=$(this.selector).first();try{this.customCss?b.wrapInner('\x3cdiv class\x3d"paywall-content" \x3e\x3c/div\x3e'):
b.wrapInner('\x3cdiv class\x3d"paywall-content" style\x3d"height: '+(this.VISIBLE_HEIGHT+this.BLUR_HEIGHT-1)+"px; overflow: hidden;"+("fokus"===this.variantType.toLowerCase()?"display: none":"")+'"\x3e\x3c/div\x3e')}catch(c){this.logIfVerbose("Ignore exception on DOM manipulation")}b.append(this.createPaywallMask());this.customCss?b.append('\x3cdiv id\x3d"'+this.paywallContainerId+'" class\x3d"custom-pw-container" \x3e'):(b.append('\x3cdiv id\x3d"'+this.paywallContainerId+'" style\x3d"width: 100%;margin:0 auto; min-height: 350px; background: white; "\x3e'),
b.css("position","relative"));$(this.selector).show();$(this.selector).find(this.article).show()},confirmationPopupCallback:function(b){var c=this,a=void 0;if($("#"+this.paywallContainerId).get(0))a=$("#"+this.paywallContainerId).html(b);else if(this.ignoreMask&&$("#paywall-container").get(0))a=$("#paywall-container").html(b),a.attr("id",this.paywallContainerId);else throw Error("paywall-container is not found!");b=a.find("#open-article, .open-article");if(b.size())b.on("click",function(){c.clearPaywallPopup();
return!1});var e=a.find("div[data-price]");b=a.find("div[data-variant]");if(e.length){var f=window.dataLayer||window.dataLayer||[];e.data("branduseecommerceactionevent")?(e={purchase:{actionField:{id:e.data("uuid"),affiliation:e.data("affiliation"),revenue:parseFloat(e.data("price")/100).toFixed(2),action:"purchase"},products:[{name:e.data("productname"),id:e.data("productid"),price:parseFloat(e.data("price")/100).toFixed(2),brand:e.data("branduseecommerceactionevent"),category:"Digital",variant:e.data("productdesc"),
quantity:1,dimension40:e.data("dimension40")}]}},f.push({event:"eCommerceAction",ecommerce:e})):(f.push({order_paymentmethod:e.data("paymentmethod"),order_campaign:e.data("campaign"),order_activity:e.data("activity"),transactionId:e.data("uuid"),transactionTotal:parseFloat(e.data("price")/100).toFixed(2),transactionProducts:[{sku:e.data("productid"),name:e.data("productdesc"),price:parseFloat(e.data("price")/100).toFixed(2),quantity:1}]}),f.push({event:"konvertering"}));window.dataLayer=window.dataLayer=
f;f="K\u00f6p - betalv\u00e4gg"+("ADBLOCKER"==a.find("div[data-variant-type]").data("variant-type")?" (adblock)":"");b=""+(b.length?""+b.data("variant"):"");this.pushNotification("Konvertering",f,b,location.pathname)}this.triggerEvent("hidePremiumContent");c.execWhen(function(){return 0<a.offset().top},function(){$("body,html").animate({scrollTop:a.offset().top},1)})},purchasePopupCallback:function(b){var c=this,a=void 0;c.robot?(a=$("#"+this.paywallContainerId).find(".robot-paywall").first(),a.html(b)):
a=$("#"+this.paywallContainerId).html(b);b=a.data("payment-method");c.variant||(c.variant=a.data("variant"));"KLARNA"==b&&(setTimeout(function(){0==$("#"+c.paywallContainerId+"  #klarna-checkout-iframe").length&&(c.pushNotification("OTHER","PSPTimeOut",""+("undefined"==typeof variant?"":""+variant),c.tracker),c.clearPaywallPopup())},c.GATEWAY_TIMEOUT),$("#"+c.paywallContainerId+"  #klarna-checkout-iframe").ready(function(){var b=!1;window._klarnaCheckout(function(f){f.on({change:function(d){if("undefined"!=
typeof d.email&&null!=d.email&&""!=d.email){c.triggerEvent("klarna.change",d);var f=a.find("div[data-price]");""!=c.tracker&&f.length&&!b&&(c.pushNotification("Inf\u00f6r Konvertering","P\u00e5b\u00f6rjat k\u00f6pfl\u00f6de",""+("undefined"==typeof c.variant?"":""+c.variant)+": ",tracker),b=!0);f=a.find("div[data-klarna-validation]");f.length&&$.ajax({type:"GET",async:!0,dataType:"jsonp",timeout:3E4,crossDomain:!0,xhrFields:{withCredentials:!0},url:f.data("klarna-validation"),data:{email:d.email,
postalCode:d.postal_code},success:function(a){a.subscriptionValid?($("#klarna-checkout-error").show(),$("#klarna-checkout-error a").css({color:"red","text-decoration":"underline"})):$("#klarna-checkout-error").hide()},error:function(a){$("#klarna-checkout-error").hide()}})}}})})}))},popupCallback:function(b){var c=!1,a=this,e=void 0;!this.ignoreMask||this.showOverlay?(this.initPopup(),e=$("#"+this.paywallContainerId).html(b)):(e=$("#paywall-container").html(b),e.attr("id",this.paywallContainerId));
b=e.find("div[data-payment-method]");b.length&&(e.attr("data-payment-method",b.data("payment-method")),c=b[0],a.robot=c="true"==(c.getAttribute("data-robot")?c.getAttribute("data-robot").toLowerCase():!1));a.variant||(a.variant=b.data("variant"));$.browser||($.browser={});$.browser.msie||($.browser.msie=!1);$.browser.version||($.browser.version=0);navigator.userAgent.match(/MSIE ([0-9]+)\./)&&($.browser.msie=!0,$.browser.version=RegExp.$1);$.when($.getScript(this.baseURL+"public/javascripts/jquery.ba-bbq.min.js")).done(function(){$(window).bind("hashchange",
function(b){0==location.hash.indexOf("#klarnaConfirm")&&a.execWhen(function(){return""!=a.readCookie(a.PURCHASE_COMPLETE)},function(){a.performHashCheck(function(b){a.confirmationPopupCallback(b)})})})});e=!1;try{e=window.self!==window.top}catch(f){}if(e)window.addEventListener("message",function(b){try{var c=JSON.parse(b.data);"true"==c.inSandboxIframe&&(a.setCookie(a.PURCHASE_COMPLETE,a.variantType,3E5),a.setCookie("sdk_dl","1",3E4),window.location.href=c.receipt)}catch(d){}},!1);else try{window.top.addEventListener("message",
function(b){b.data==a.PURCHASE_COMPLETE&&(a.setCookie(b.data,a.variantType,3E5),a.setCookie("sdk_dl","1",3E4))},!1)}catch(d){this.logIfVerbose("Error on adding event listener: "+d.message)}e=$("#"+this.paywallContainerId+"  #servicePlusBuyLink");e.length&&($("#"+this.paywallContainerId).children().hide(),$(document).on("click","#"+this.paywallContainerId+"  #servicePlusBuyLink",function(b){a.logIfVerbose("Loading Purchase Popup...");b.preventDefault();a.fetchRemotePage($(this).data("href"),a.purchasePopupCallback);
return!1}),jQuery.browser={},jQuery.browser.msie=!1,jQuery.browser.version=0,navigator.userAgent.match(/MSIE ([0-9]+)\./)&&(jQuery.browser.msie=!0,jQuery.browser.version=RegExp.$1),c?$("#"+this.paywallContainerId).find("#pwBotChat").fadeIn():e.click())},performHashCheck:function(b,c){c||(c=function(){});var a=this,e=this.readCookie("pwd-complete");""!=e&&null!=a.idToken&&(this.eraseCookie("pwd-complete"),$.ajax({type:"GET",async:!0,dataType:"jsonp",timeout:2E4,crossDomain:!0,url:this.baseURL+"webpayment/check-set-password",
data:{accountId:e},success:function(d){"undefined"!==typeof d&&1==d.isSet&&(d=a.queryParams(location.search.substr(1).split("\x26")),f=a.baseURL+"webpayment/paywall-password-confirm?variantType\x3d"+(d.variantType?d.variantType:a.variantType)+"\x26forcehit\x3d"+a.forceHitParam+"\x26loginURL\x3d"+encodeURIComponent(a.loginURL),location.hash="receipt-page",a.execWhen(function(){return"undefined"!=typeof $},function(){a.logIfVerbose("Loading Purchase Confirmation Popup...");a.fetchRemotePage(f,b,c,3E4)}))},
error:function(a){console.log("Error check set password")}}));var e=!0,f="",d=this.readCookie(this.PURCHASE_COMPLETE);""!=d&&(d==this.variantType&&this.eraseCookie(this.PURCHASE_COMPLETE),0==location.hash.indexOf("#klarnaConfirm")?(f=location.toString().split("#")[1].substring(18)+"\x26articleId\x3d"+this.articleId,f=f.replace(/&amp;/g,"\x26"),d=/^(https?):/,0==f.replace(d,"").indexOf(this.baseURL)&&(e=!1)):(e=this.queryParams(location.search.substr(1).split("\x26")),f=this.baseURL+"v2/paywall-klarna-confirm?variantType\x3d"+
(e.variantType?e.variantType:this.variantType),e=!1));0==location.hash.indexOf("#companyConfirm")&&(f=location.toString().split("#")[1].substring(19)+"\x26appId\x3d"+this.appId+"\x26articleId\x3d"+this.articleId,d=/^(https?):/,0==f.replace(d,"").indexOf(this.baseURL)&&(e=!1));e||(this.logIfVerbose("fetchedURL \x3d "+f),e=document.createElement("a"),e.href=f,d=this.queryParams(e.search.substr(1).split("\x26")),"undefined"==typeof d.variantType&&(d.variantType=""),e=d.variantType!=this.variantType,
d.appearance&&"OVERLAY"==d.appearance&&(a.showOverlay=!0,a.ignoreMask=!1));e||""==f?c():(location.hash="receipt-page",a.execWhen(function(){return"undefined"!=typeof $},function(){a.logIfVerbose("Loading Purchase Confirmation Popup...");a.fetchRemotePage(f,b,c,3E4)}))}}))})();
(function(){for(var b=document.getElementsByTagName("script"),c=0;c<b.length;c++)b[c].id&&b[c].src&&/extension\.js/.test(b[c].src)&&(b[c].getAttribute("data-initialized")||new ServicePlus.Paywall(b[c]));"#debug"==window.location.hash&&(b=document.createElement("script"),b.setAttribute("src","https://jsconsole.com/js/remote.js?890366e0-6e26-49c3-9bcc-892dd89d131c"),document.body.appendChild(b))})();
(function(){(function(b,c,a){"addEventListener"in window?b.addEventListener(c,a,!1):"attachEvent"in window&&b.attachEvent("on"+c,a)})(window,"message",function(b){if("string"===typeof b.data&&0==b.data.indexOf("spluspwmsg:"))try{var c=b.data.substring(11),a=JSON.parse(decodeURIComponent(c));(window.dataLayer||window.dataLayer||[]).push(a)}catch(e){}})})();