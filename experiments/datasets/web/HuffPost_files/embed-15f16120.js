!function(){function e(t,s,n){function a(o,c){if(!s[o]){if(!t[o]){var r="function"==typeof require&&require;if(!c&&r)return r(o,!0);if(i)return i(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var l=s[o]={exports:{}};t[o][0].call(l.exports,function(e){return a(t[o][1][e]||e)},l,l.exports,e,t,s,n)}return s[o].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)a(n[o]);return a}return e}()({"/opt/elections/releases/f7dcd40fd142c8f82ae554cd811d5b8c1ed07ac6/assets/javascripts/common/get.js":[function(e,t,s){t.exports=function(e){return new Promise(function(t,s){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){if(4==this.readyState){var e=this.status;e>=200&&e<300?t(this):s(this)}},n.send()})}},{}],"/opt/elections/releases/f7dcd40fd142c8f82ae554cd811d5b8c1ed07ac6/assets/javascripts/common/pager.js":[function(e,t,s){function n(e,t){this.el=e,this.candidateList=t,this.nextButton=e.querySelector(".follow-next"),this.prevButton=e.querySelector(".follow-prev"),this.raceIndex=0,this.displayedNumber=4,this.mediaQueries=[],this.nextButton.addEventListener("click",this.nextPage.bind(this)),this.prevButton.addEventListener("click",this.prevPage.bind(this))}n.prototype.watch=function(e,t){var s=window.matchMedia(e),n=this;this.mediaQueries.push(s),s.addListener(function(e){e.matches&&n.update(t)}),s.matches&&this.update(t)},n.prototype.update=function(e){this.displayedNumber=e;var t=this.candidateList.childNodes.length,s=t-e>0?t-e:0;1===e&&this.animate(0),1!==e&&this.raceIndex>s&&this.animate(s),this.updateVisibility(),console.debug("Follow pager at breakpoint "+e)},n.prototype.nextPage=function(){var e=this.raceIndex+1;e<=this.candidateList.childNodes.length-this.displayedNumber&&this.animate(e),this.updateVisibility()},n.prototype.prevPage=function(){var e=this.raceIndex-1;e>=0&&(this.animate(e),this.updateVisibility())},n.prototype.animate=function(e){var t=this.candidateList.childNodes.length;this.raceIndex=e<0?0:e;var s=-100*e,n=t>1?Math.round(this.candidateList.childNodes[1].getBoundingClientRect().left-this.candidateList.childNodes[0].getBoundingClientRect().right):0,a=0!==e?n*(-1*e):0;this.transformStr="translateX("+s+"%) translateX("+a+"px)";for(var i=0;i<t;i++){var o=this.candidateList.childNodes[i];o.style.transition="transform 500ms ease-out",o.style.transform=this.transformStr}},n.prototype.updateVisibility=function(){var e=this.candidateList.childNodes.length;e<=this.displayedNumber?this.el.classList.add("hide"):(this.el.classList.remove("hide"),0!==this.raceIndex?this.prevButton.removeAttribute("disabled"):this.prevButton.setAttribute("disabled","disabled"),this.raceIndex+this.displayedNumber>=e?this.nextButton.setAttribute("disabled","disabled"):this.nextButton.removeAttribute("disabled"))},t.exports=n},{}],"/opt/elections/releases/f7dcd40fd142c8f82ae554cd811d5b8c1ed07ac6/assets/javascripts/common/mobileEnrichment.js":[function(e,t,s){var n=e("./subscribeToPush");!function(){var e=0,t=function(){var e=document.querySelector("body");e.classList.add("isMobileApp"),window.HPAPP_ITEMS.subscribeToPushTag&&(e.classList.add("hasPushSupport"),n.enable())},s=setInterval(function(){e++,e>400&&clearInterval(s),window.HPAPP_ITEMS&&(t(),clearInterval(s))},25)}(),t.exports=null},{"./subscribeToPush":"/opt/elections/releases/f7dcd40fd142c8f82ae554cd811d5b8c1ed07ac6/assets/javascripts/common/subscribeToPush.js"}],"/opt/elections/releases/f7dcd40fd142c8f82ae554cd811d5b8c1ed07ac6/assets/javascripts/common/notify.js":[function(e,t,s){function n(e){setTimeout(function(){e.classList.add("animate-out")},100),e.addEventListener("transitionend",function(e){var t=e.target;t&&t.parentNode&&t.parentNode.removeChild(t)})}function a(e){return"follow"===e.type?'<span class="message-one">'+e.message+'</span><span class="message-two">'+e.raceDescription+"</span>":e.message}function i(e){var t=document.getElementById("js-notification-station"),s=document.createElement("div");s.setAttribute("class","notify"),s.innerHTML='<div class="icon '+e.icon+'"></div><div class="message">'+a(e)+"</div>",t.appendChild(s),n(s)}function o(e){i(e)}t.exports=o},{}],"/opt/elections/releases/f7dcd40fd142c8f82ae554cd811d5b8c1ed07ac6/assets/javascripts/dashboard/followed.js":[function(e,t,s){function n(e){return m("race/"+e+".json").then(function(e){return JSON.parse(e.responseText)}).catch(function(){})}function a(e,t){var s=document.createElement("div");return s.setAttribute("id","followed-"+t.id),f(s,t,{featured:!0,follow:e,clickable:!0})}function i(){if(b)return JSON.parse(window.localStorage.getItem("followedRaces")||JSON.stringify([]))}function o(e){b&&window.localStorage.setItem("followedRaces",JSON.stringify(e))}function c(e){0===e.list.childNodes.length?e.emptyList.classList.add("show"):e.emptyList.classList.remove("show")}function r(e,t,s){s.className="follow minus yr-track";var r=i();if(r&&-1===r.indexOf(t)&&(r.push(t),o(r),e.list))return n(t).then(function(t){if(t&&(e.raceType===t.type||"all"===e.raceType)){var s=a(e,t);s.style.transform=e.pager.transformStr,e.list.appendChild(s,e.list.childNodes[0]),e.pager.updateVisibility(),c(e)}})}function d(e,t,s){s.className="follow plus yr-track";var n=i(),a=n.indexOf(t);if(n&&-1!==a){if(n.splice(a,1),o(n),e.list){var r=e.list.querySelector("#followed-"+t);if(r){e.list.removeChild(r);var d=e.list.childNodes.length;if(e.pager.raceIndex+e.pager.displayedNumber>d&&d>=e.pager.displayedNumber){var l=e.pager.raceIndex-1;e.pager.animate(l)}e.pager.updateVisibility(),c(e)}}var u=document.querySelector(".featured-"+t);u&&(u.querySelector(".follow").className="follow plus yr-track")}}function l(e,t){var s=i();if(s){if(t)for(;e.list.firstChild;)e.list.removeChild(e.list.firstChild);Promise.all(s.map(function(e){return n(e)})).then(function(t){t.forEach(function(t){if(t&&(e.raceType===t.type||"all"===e.raceType)){var s=a(e,t);s.style.transform=e.pager.transformStr,e.list.appendChild(s)}})}).catch(function(e){console.log(e)}).then(function(){e.pager.updateVisibility(),c(e)})}}function u(e,t){this.raceType=t,e&&(this.el=e,this.list=e.querySelector(".follow-list"),this.emptyList=e.querySelector(".follow-empty"),this.pager=new h(e.querySelector(".pager"),e.querySelector(".follow-list")),this.pager.watch("(max-width: 540px)",1),this.pager.watch("(min-width: 541px) and (max-width: 1023px)",2),this.pager.watch("(min-width: 1024px) and (max-width: 1279px)",3),this.pager.watch("(min-width: 1280px)",4),l(this))}var f=e("../common/buildCandidateListElement"),p=e("../common/notify"),m=e("../common/get"),h=e("../common/pager"),b=void 0!==typeof window&&window.localStorage;u.prototype.toggleFollow=function(e,t,s){s&&s.target&&s.target.classList.contains("minus")?(s.target.setAttribute("data-ylk","slk:"+t+";elm:unfollow"),d(this,t,s.target),p({type:"follow",icon:"minus",message:"You just unfollowed:",raceDescription:e})):s&&s.target&&s.target.classList.contains("plus")&&(s.target.setAttribute("data-ylk","slk:"+t+";elm:follow"),r(this,t,s.target),p({type:"follow",icon:"plus",message:"You just followed:",raceDescription:e}))},u.prototype.update=function(){0!==this.list.childNodes.length&&l(this,!0)},t.exports=u},{"../common/buildCandidateListElement":"/opt/elections/releases/f7dcd40fd142c8f82ae554cd811d5b8c1ed07ac6/assets/javascripts/common/buildCandidateListElement.js","../common/get":"/opt/elections/releases/f7dcd40fd142c8f82ae554cd811d5b8c1ed07ac6/assets/javascripts/common/get.js","../common/notify":"/opt/elections/releases/f7dcd40fd142c8f82ae554cd811d5b8c1ed07ac6/assets/javascripts/common/notify.js","../common/pager":"/opt/elections/releases/f7dcd40fd142c8f82ae554cd811d5b8c1ed07ac6/assets/javascripts/common/pager.js"}],"/opt/elections/releases/f7dcd40fd142c8f82ae554cd811d5b8c1ed07ac6/assets/javascripts/common/subscribeToPush.js":[function(e,t,s){var n=e("../common/notify"),a=void 0!==typeof window&&window.sessionStorage,i=function(){window.HPAPP_ITEMS&&window.HPAPP_ITEMS.subscribeToPushTag&&a&&null===sessionStorage.getItem("pushTags")&&window.sessionStorage.setItem("pushTags",JSON.stringify(window.HPAPP_ITEMS.pushTags))},o=function(){if(a)return JSON.parse(sessionStorage.getItem("pushTags")||JSON.stringify([]))},c=function(e){a&&window.sessionStorage.setItem("pushTags",JSON.stringify(e))},r=function(e){var t=e.substr(0,2),s=e.substr(2,1),n="S"===s?"sen":"G"===s?"gov":"house";return"elec2018-"+t+"-"+n+("house"===n?"-"+parseInt(e.substr(2,2)):"")},d=function(e){return o().indexOf(e)>-1},l=function(e,t){var s=r(t);d(s)&&e.classList.add("enabled")},u=function(e,t,s){var a=s.target,i=o(),l=r(t);if(d(l)){a.setAttribute("data-ylk","slk:"+t+";elm:unsubscribe"),window.HPAPP_ITEMS.unsubscribeToPushTag(l);var u=i.filter(function(e){return e!==l});c(u),a.classList.remove("enabled"),n({type:"subscribe",icon:"unsub",message:"You just turned off alerts for the "+e+" race."})}else a.setAttribute("data-ylk","slk:"+t+";elm:subscribe"),window.HPAPP_ITEMS.subscribeToPushTag(l),i.push(l),c(i),a.classList.add("enabled"),n({type:"subscribe",icon:"sub",message:"You just turned on alerts for the "+e+" race."})};t.exports={enable:i,subToggle:u,maybeEnableButton:l}},{"../common/notify":"/opt/elections/releases/f7dcd40fd142c8f82ae554cd811d5b8c1ed07ac6/assets/javascripts/common/notify.js"}],"/opt/elections/releases/f7dcd40fd142c8f82ae554cd811d5b8c1ed07ac6/assets/javascripts/common/linkToRace.js":[function(e,t,s){function n(e){var t="/2018/results/state/"+e.stateCode;switch(e.type){case"G":return t+"#governor";case"H":case"S":return t+"#"+e.id;case"B":return t+"#ballot";default:return t}}t.exports=n},{}],"/opt/elections/releases/f7dcd40fd142c8f82ae554cd811d5b8c1ed07ac6/assets/javascripts/common/buildCandidateListHTML.js":[function(e,t,s){function n(e){return Math.round(100*e)+"%"}function a(e){var t=e.length;return 0===t?"":1===t?e[0]:2===t?e[0]+" and "+e[1]:e.reduce(function(e,s,n){return n+1===t?e+"and "+s:e+s+", "},"")}function i(e){var t=window.localStorage.getItem("followedRaces");if(t&&(t=JSON.parse(t),-1!==t.indexOf(e)))return!0}function o(e){var t=e.candidates[0],s={dem:"Democratic",gop:"Republican",ind:"Independent"};return['<p><span class="',t.partyId,'">',s[t.partyId],"</span> ",t.fullName," was uncontested and will be the House Representative</p>"].join("")}function c(e){var t=(e.candidates[0],{dem:"Democratic",gop:"Republican",ind:"Independent"}),s="ind"===e.candidates[0].partyId?"Independent, caucuses as a ":"";return["<p>Seat currently held by ",e.candidates[0].fullName," (",s,'<strong class="',e.className,'">',t[e.winner],"</strong>). ",e.note,".</p>"].join("")}var r=e("./linkToRace"),d=/^[A-Z][A-Z]S[123]$/,l=/^[A-Z][A-Z][0-9][0-9]$/,u={locale:"en",t:function(e,t){switch(e){case"tooltip.Percent counted":return t.percent+" of precincts reporting";case"tooltip.Percent pending":return"Vote counts will be updated here as they are reported on Election Day on "+t.date;default:return/^state\./.test(e)?e.slice(6):e}}},f=function(e,t,s,i){var o=(e.fractionReporting,new Date(2018,10,6,0,0,0)),c="object"==typeof Intl?new Intl.DateTimeFormat(t.locale,{month:"short",day:"numeric"}).format(o):"Nov 6",r="object"==typeof Intl?new Intl.NumberFormat(t.locale,{style:"percent"}).format:n,d=!i&&e.runoff.length>0&&'<div class="runoff"><span class="runoff-text">Note: There will be a runoff election to decide the final winner between '+a(e.runoff.map(function(t){return e.candidates[t].fullName}))+".</span></div>"||"",l=Date.now()<o?['<div class="incumbent-note">* incumbent</div>','<div class="fraction-pending">',t.t("tooltip.Percent pending",{date:c}),"</div>",d]:['<div class="race-footer">','<div class="incumbent-note">* incumbent</div>','<div class="fraction-reporting">',t.t("tooltip.Percent counted",{percent:r(e.fractionReporting)}),"</div>","</div>",d];return s&&(l.push('<p class="state-click only-touch"><a href="'+s+'">Full results »</a></p>'),l.push('<p class="state-click except-touch">Click state for full results</a></p>')),l.join("")},p=function(e,t){var s=t&&t.i18n||u,n=t&&t.urlTemplate&&t.urlTemplate.replace("XX",e.id.slice(0,2))||null,a=t&&t.wideTable,p=t&&t.clickable,m=a?"wide":null,h=t&&t.featured?"featured":null,b=p?"clickable":null,v=t&&t.follow&&!e.parentId,g=t&&!!t.hideTitle,w=p&&!g,y=t&&t.maxNumCandidates||3,j=t&&t.hideRunoffNote,x=f(e,s,n,j),T=e.candidates,S=e.nVotes,L=(Math.max.apply(null,T.map(function(e){return e.n})),l.test(e.id)),I=d.test(e.id),N=['<div class="candidate-list '+[e.className,m,h,b].join(" ")+'" race-id="'+e.id+'">','<div class="race-header">',(!g||"")&&'<h3 class="race-title">',(w||"")&&'<a href="'+r(e)+'" target="_blank">',(!g||"")&&e.desc,(w||"")&&"</a>",(!g||"")&&"</h3>",'<div class="notification-bell js-sub-to-push yr-track"></div>'];v&&"undefined"!=typeof window&&window.localStorage&&!e.uncontested&&!e.noElection&&(i(e.parentId||e.id)?N.push(['<div class="follow minus yr-track"></div>']):N.push(['<div class="follow plus yr-track"></div>'])),N.push("</div>");var P;if(L&&1===T.length?P=o(e):I&&e.noElection&&(P=c(e)),P)N.push(P);else{N.push((p||"")&&'<a href="'+r(e)+'" target="_blank">'),N.push('<div class="list-header"><span class="name">Candidate</span><span class="votes">Votes</span><span class="vote-percent">Counted</span></div>');var E="object"==typeof Intl?new Intl.NumberFormat(s.locale).format:String;N.push("<ol>");for(var C=Math.min(T.length,y),k=0;k<C;k++){var A=T[k],M=A.winner?"winner":"",q=!0===A.incumbent?" incumbent":"",H=A.n,O=H>0?'<span class="votes">'+E(H)+"</span>":"",R=0===S?0:H/S*100;N.push(['<li class="candidate ',M," ",A.partyId,'">','<span class="name',q,'">',A.name,"</span>",O,'<span class="vote-percent">',Math.round(R),"%</span>","</li>"].join(""))}N.push("</ol>"),N.push((p||"")&&"</a>")}return P||N.push(x),N.push("</div>"),N.join("")};t.exports=p},{"./linkToRace":"/opt/elections/releases/f7dcd40fd142c8f82ae554cd811d5b8c1ed07ac6/assets/javascripts/common/linkToRace.js"}],"/opt/elections/releases/f7dcd40fd142c8f82ae554cd811d5b8c1ed07ac6/assets/javascripts/common/buildCandidateListElement.js":[function(e,t,s){var n=e("./buildCandidateListHTML"),a=e("./subscribeToPush"),i=function(e,t,s){var i=s&&s.follow;if(e.innerHTML=n(t,s),i){var o=t.parentId||t.id,c=t.parentId?"":t.desc,r=e.querySelector(".follow");r&&r.addEventListener("click",function(e){i.toggleFollow(c,o,e)})}var d=e.querySelector(".js-sub-to-push");return d&&(a.maybeEnableButton(d,t.id),d.addEventListener("click",function(e){a.subToggle(t.desc,t.id,e)})),e};t.exports=i},{"./buildCandidateListHTML":"/opt/elections/releases/f7dcd40fd142c8f82ae554cd811d5b8c1ed07ac6/assets/javascripts/common/buildCandidateListHTML.js","./subscribeToPush":"/opt/elections/releases/f7dcd40fd142c8f82ae554cd811d5b8c1ed07ac6/assets/javascripts/common/subscribeToPush.js"}],"/opt/elections/releases/f7dcd40fd142c8f82ae554cd811d5b8c1ed07ac6/assets/javascripts/embed.js":[function(e,t,s){function n(){return Promise.all(h.map(function(e){return l("race/"+e+".json").then(function(e){return JSON.parse(e.responseText)}).catch(function(){})})).then(function(e){return e.filter(function(e){return!!e})})}function a(e){var t=document.createElement("div");return t=d(t,e,{featured:!0,clickable:!0,follow:y}),t.firstChild}function i(){window.parent&&window.parent.postMessage({frameHeight:document.querySelector("html").offsetHeight,location:location.pathname+location.search+location.hash},"*")}function o(e){var t=document.querySelector(".pager");if(t){var s=new u(t,e);s.watch("(max-width: 768px)",1),s.watch("(min-width: 769px) and (max-width: 1024px)",2),s.watch("(min-width: 1025px) and (max-width: 1279px)",3),s.watch("(min-width: 1280px)",4)}}function c(){window.matchMedia("(max-width: 414px)").addListener(i)}function r(){return console.debug("Polling for race data"),new Promise(function(e,t){setTimeout(e,3e4)}).then(n).then(function(e){e.forEach(function(e){var t=a(e),s=j.querySelector(".candidate-list[race-id="+e.id+"]");s?(t.setAttribute("style",s.getAttribute("style")),j.replaceChild(t,s)):console.debug("Couldn't find existing race "+e.id+", skipping")})}).then(r)}var d=e("./common/buildCandidateListElement"),l=e("./common/get"),u=e("./common/pager"),f=e("./dashboard/followed");e("./common/mobileEnrichment");var p,m,h=[];try{if(location.search){var b=function(){return location.search.slice(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){return e[t[0]]=decodeURIComponent(t[1]),e},{})}();h=b.races.split(","),p=b.title,m=b.subtitle}else h=location.hash.slice(1).split(",")}catch(e){console.error(e)}var v=document.getElementById("titles");if(p&&v){var g=document.createElement("h2");g.classList.add("title"),g.textContent=p,v.appendChild(g)}if(m&&v){var w=document.createElement("p");w.classList.add("subtitle"),w.textContent=m,v.appendChild(w)}var y=(n(),new f);const j=document.getElementById("races");n().then(function(e){e.forEach(function(e){j.appendChild(a(e))}),o(j)}).then(i).then(c).then(r)},{"./common/buildCandidateListElement":"/opt/elections/releases/f7dcd40fd142c8f82ae554cd811d5b8c1ed07ac6/assets/javascripts/common/buildCandidateListElement.js","./common/get":"/opt/elections/releases/f7dcd40fd142c8f82ae554cd811d5b8c1ed07ac6/assets/javascripts/common/get.js","./common/mobileEnrichment":"/opt/elections/releases/f7dcd40fd142c8f82ae554cd811d5b8c1ed07ac6/assets/javascripts/common/mobileEnrichment.js","./common/pager":"/opt/elections/releases/f7dcd40fd142c8f82ae554cd811d5b8c1ed07ac6/assets/javascripts/common/pager.js","./dashboard/followed":"/opt/elections/releases/f7dcd40fd142c8f82ae554cd811d5b8c1ed07ac6/assets/javascripts/dashboard/followed.js"}]},{},["/opt/elections/releases/f7dcd40fd142c8f82ae554cd811d5b8c1ed07ac6/assets/javascripts/embed.js"]);